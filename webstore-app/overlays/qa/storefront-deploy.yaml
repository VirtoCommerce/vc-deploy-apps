apiVersion: apps/v1
kind: Deployment
metadata:
  name: storefront
spec:
  replicas: 1
  selector:
    matchLabels:
      app: storefront
  template:
    metadata:
      labels:
        app: storefront
    spec:
      containers:
      - name: vc-storefront-web
        resources:
          requests:
            memory: "512Mi"
          limits:
            memory: "768Mi" 
        volumeMounts:
        - mountPath: /opt/virtocommerce/storefront/wwwroot/cms-content
          name: cms-content-data
        env:
          - name: CookieAuthenticationOptions__ExpireTimeSpan
            value: 12:00:00
          - name: SnapshotCollectorConfiguration__IsEnabled
            value: "false"
          - name: APPINSIGHTS_INSTRUMENTATIONKEY
            value: 4122074c-f2ad-489b-811f-d557350fb644
      volumes:
      - name: cms-content-data
        persistentVolumeClaim:
          claimName: cms-content-nfs